//user

const { string } = require("joi");
const mongoose = require("mongoose");
const autoIncrement = require("mongoose-auto-increment");

mongoose
  .connect("mongodb://localhost:27017/project", {
    useNewUrlParser: true,
  })
  .then(() => console.log("db is connected"))
  .catch((err) => console.log(err));
autoIncrement.initialize(mongoose.connection);

const User = mongoose.model(
  "user",
  new mongoose.Schema({
    _id: Number,
    firstname: { type: String, required: true },
    lastname: { type: String, required: true },
    mno: { type: Number, required: true },
    address: { type: Object, required: false },
    city: { type: String, required: true },
    state: { type: String, required: true },
    email: { type: String, required: true },
    password: { type: String, required: true },
    role: { type: String, default: "user" },
  }).plugin(autoIncrement.plugin, {
    model: "post",
    field: "_id",
    startAt: 1,
    incrementBy: 1,
  })
);

module.exports = { User };
///

const mongoose = require("mongoose");
const autoIncrement = require("mongoose-auto-increment");

mongoose
  .connect("mongodb://localhost:27017/project", {
    useNewUrlParser: true,
  })
  .then(() => console.log("db is connected"))
  .catch((err) => console.log(err));
autoIncrement.initialize(mongoose.connection);

const Shiping = mongoose.model(
  "shiping",
  new mongoose.Schema({
    _id: Number,
    userid: {
      type: Number,
      required: true,
      ref: "user",
    },
    productid: {
      type: Number,
      required: true,
      ref: "product",
    },
    quantity: {
      type: Number,
      required: true,
    },
    address: {
      type: Object,
    },
  }).plugin(autoIncrement.plugin, {
    model: "post",
    field: "_id",
    startAt: 1,
    incrementBy: 1,
  })
);

module.exports = Shiping;
